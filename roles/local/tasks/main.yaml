---
# This playbook contains plays that will be run on the local machine.

- name: Set hostnames in /etc/hosts
  become: true
  ansible.builtin.lineinfile:
    path: /etc/hosts
    regexp: "^.*{{ item.value['node_info'].fqdn }} {{ item.value['node_info'].name }}$"
    line: "{{ item.value['node_info'].ip_address }} {{ item.value['node_info'].fqdn }} {{ item.value['node_info'].name }}"
  loop: "{{ nodes | dict2items }}"